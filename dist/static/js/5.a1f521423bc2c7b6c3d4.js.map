{"version":3,"sources":["webpack:///src/views/areaSetting/areaDetail/index.vue","webpack:///./src/views/areaSetting/areaDetail/areaDetail.js","webpack:///./src/views/areaSetting/areaDetail/index.vue?d2b9","webpack:///./src/views/areaSetting/areaDetail/index.vue","webpack:///./src/assets/images/location.png","webpack:///./src/assets/images/start.png"],"names":["areaSetting_areaDetail","name","data","map","points","areaId","address","addressList","showList","center","cityCode","defaultAddress","defaultLng","defaultLat","created","this","$route","params","id","watch","geoCode","mounted","getDetail","methods","_this","AMap","Geocoder","city","getLocation","status","result","console","log","geocodes","location","lng","lat","sendPosition","_this2","length","pointsArr","item","arr","push","point","stringify_default","addr","$post","then","res","code","$Message","success","setTimeout","$router","warning","error","catch","$Spin","hide","MapInit","Map","resizeEnable","zoom","on","ev","clearMap","setMarker","obj","lnglat","locationArr","index","LngLat","setStart","polygon","Polygon","path","fillOpacity","fillColor","borderWeight","strokeColor","add","setCenter","preStep","pop","reRender","autoInput","type","plugin","Autocomplete","search","tips","that","icon","Icon","size","Size","image","startIcon","imageSize","marker","Marker","position","offset","Pixel","chooseAddress","addressSearch","axios","get","key","keywords","headers","Content-Type","response","err","markerIcon","_this3","pointArr","totlaLng","totalLat","toFixed","views_areaSetting_areaDetail","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","placeholder","model","value","callback","$$v","expression","staticStyle","width","click","$event","_l","_s","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports"],"mappings":"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","file":"static/js/5.a1f521423bc2c7b6c3d4.js","sourcesContent":["<template>\r\n    <div class=\"detail_container\">\r\n        <div id=\"map\"></div>\r\n        <div class=\"map_content\">\r\n            <div class=\"name_box\">\r\n                <Input placeholder=\"请输入默认上车点\" v-model=\"defaultAddress\" />\r\n            </div>\r\n            <div class=\"search_box\">\r\n                <Input v-model=\"address\" placeholder=\"请输入地址\" style=\"width: 300px\" id=\"tipinput\" />\r\n                <Button type=\"primary\" @click=\"autoInput('search')\" class=\"search_btn\">搜索</Button>\r\n                <div class=\"result_box\" v-if=\"addressList.length > 0 && showList\">\r\n                    <div class=\"single_result\" v-for=\"(item,index) in addressList\" :key=\"index\" @click=\"chooseAddress(item)\">\r\n                        <p class=\"name\">{{item.name}}</p>\r\n                        <p class=\"detail\">{{item.address}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"name_box\">\r\n                <Input placeholder=\"请输入区域名称\" v-model=\"name\" />\r\n            </div>\r\n            <div class=\"coo_box\">\r\n                <Button type=\"primary\" v-if=\"points.length > 0\" @click=\"reRender\">重新绘制</Button>\r\n                <Button type=\"primary\" v-if=\"points.length > 1\" @click=\"preStep\">上一步</Button>\r\n                <Button type=\"primary\" v-if=\"points.length > 0\"  @click=\"sendPosition\">修改区域信息</Button>\r\n            </div>\r\n            <div class=\"location_box\">\r\n                <p v-if=\"points.length > 0\">已添加的点</p>\r\n                <template v-for=\"(item,index) in points\" >\r\n                    <p class=\"single\" :key=\"index\">{{item.lng}},{{item.lat}}</p>\r\n                </template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport areaDetail from \"./areaDetail\"\r\nexport default areaDetail\r\n</script>\r\n<style lang=\"less\">\r\n@import url(\"./areaDetail.less\");\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/areaSetting/areaDetail/index.vue","import AMap from 'AMap'\r\nimport axios from 'axios'\r\nimport markerIcon from \"./../../../assets/images/location.png\"\r\nimport startIcon from \"./../../../assets/images/start.png\"\r\nexport default {\r\n    name: \"areaDetail\",\r\n    data() {\r\n        return {\r\n            map: {},\r\n            name: \"\",\r\n            points: [],\r\n            areaId: \"\",\r\n            address: \"\",\r\n            addressList: [],\r\n            showList: false,\r\n            center: {},\r\n            cityCode: '',\r\n            defaultAddress: \"\",\r\n            defaultLng: null,\r\n            defaultLat: null\r\n        }\r\n    },\r\n    created() {\r\n        this.areaId = this.$route.params.id\r\n        \r\n    },\r\n    watch: {\r\n        defaultAddress () {\r\n            this.geoCode()\r\n            \r\n        }\r\n    },\r\n    mounted() {\r\n        this.getDetail()\r\n        \r\n    },\r\n    methods: {\r\n        // 根据地址获取经纬度\r\n        geoCode() {\r\n            let _this = this\r\n            let geocoder = new AMap.Geocoder({\r\n                city: \"\", //城市设为北京，默认：“全国”\r\n            });\r\n            geocoder.getLocation(_this.defaultAddress, function(status, result) {\r\n                console.log(\"获取经纬度\")\r\n                console.log(status)\r\n                console.log(result)\r\n                if (status === \"complete\") {\r\n                    _this.defaultLng = result.geocodes[0].location.lng\r\n                    _this.defaultLat = result.geocodes[0].location.lat\r\n                    // _this.defaultLocation = `${result.geocodes.location.lng},${result.geocodes.location.lat}`\r\n                }\r\n            });\r\n        },\r\n        // 发送位置信息\r\n        sendPosition() {\r\n            if (!this.defaultAddress || !this.defaultLat || !this.defaultLng) {\r\n                this.$Message.warning(\"请默认上车地址\")\r\n                return\r\n            }\r\n            if (!this.name) {\r\n                this.$Message.warning(\"请填写区域名称\")\r\n                return\r\n            }\r\n            if (this.points.length === 0) {\r\n                this.$Message.warning(\"请选择区域位置\")\r\n                return\r\n            }\r\n            let pointsArr = []\r\n            this.points.map(item => {\r\n                let arr=[]\r\n                arr.push(item.lng)\r\n                arr.push(item.lat)\r\n                pointsArr.push(arr)\r\n            })\r\n            let params = {\r\n                name:this.name,\r\n                point: JSON.stringify(pointsArr),\r\n                id: this.areaId,\r\n                lng: this.defaultLng,\r\n                lat: this.defaultLat,\r\n                addr: this.defaultAddress\r\n            }\r\n            this.$post(`/admin/dispatch/edit-location`,params).then(res => {\r\n                if (res.code === 200) {\r\n                    this.$Message.success(\"修改成功\")\r\n                    setTimeout(() => {\r\n                        this.$router.push({\r\n                            name:\"areaList\"\r\n                        })\r\n                    },1000)\r\n                    \r\n                } else {\r\n                    this.$Message.warning(res.error)\r\n                }\r\n            })\r\n            .catch(res => {\r\n                this.$Spin.hide();\r\n                this.$Message.warning(\"服务端异常\")\r\n            })\r\n        },\r\n        // 初始化地图\r\n        MapInit() {\r\n            let _this = this\r\n            var map = new AMap.Map('map', {\r\n                resizeEnable: true,\r\n                zoom: 15\r\n            })\r\n            map.on('click', function (ev) {\r\n                map.clearMap()\r\n                if (_this.center.lat && _this.center.lng) {\r\n                    _this.setMarker(_this)\r\n                }\r\n                let obj = {\r\n                    lat: ev.lnglat.lat,\r\n                    lng: ev.lnglat.lng\r\n                }\r\n                _this.points.push(obj)\r\n                let locationArr = []\r\n                _this.points.map((item, index) => {\r\n                    let point = new AMap.LngLat(item.lng, item.lat)\r\n                    locationArr.push(point)\r\n                    if (index === 0) {\r\n                        _this.setStart(_this, item.lng, item.lat)\r\n                    }\r\n                })\r\n                var polygon = new AMap.Polygon({\r\n                    path: locationArr,\r\n                    fillOpacity: '0.5',\r\n                    fillColor: '#fff', // 多边形填充颜色\r\n                    borderWeight: 0.2, // 线条宽度，默认为 1\r\n                    strokeColor: 'red' // 线条颜色\r\n                })\r\n                map.add(polygon)\r\n            })\r\n            _this.map = map\r\n            if (_this.points.length > 0) {\r\n                let locationArr =[]\r\n                _this.points.map((item, index) => {\r\n                    let point = new AMap.LngLat(item.lng, item.lat)\r\n                    locationArr.push(point)\r\n                    if (index === 0) {\r\n                        _this.setStart(_this, item.lng, item.lat)\r\n                    }\r\n                })\r\n                var polygon = new AMap.Polygon({\r\n                    path: locationArr,\r\n                    fillOpacity: '0.5',\r\n                    fillColor: '#fff', // 多边形填充颜色\r\n                    borderWeight: 0.2, // 线条宽度，默认为 1\r\n                    strokeColor: 'red' // 线条颜色\r\n                })\r\n                map.add(polygon)\r\n            }\r\n            map.setCenter(new AMap.LngLat(_this.center.lng, _this.center.lat))\r\n        },\r\n         // 上一步\r\n         preStep() {\r\n            let _this = this\r\n            if (this.points.length > 0) {\r\n                _this.map.clearMap()\r\n                _this.points.pop()\r\n                let locationArr = []\r\n                _this.points.map((item, index) => {\r\n                    let point = new AMap.LngLat(item.lng, item.lat)\r\n                    locationArr.push(point)\r\n                })\r\n                var polygon = new AMap.Polygon({\r\n                    path: locationArr,\r\n                    fillColor: '#fff', // 多边形填充颜色\r\n                    borderWeight: 0.2, // 线条宽度，默认为 1\r\n                    strokeColor: 'red' // 线条颜色\r\n                })\r\n                _this.map.add(polygon)\r\n                _this.setStart(_this, _this.points[0].lng, _this.points[0].lat)\r\n            } else {\r\n                _this.map.clearMap()\r\n            }\r\n            _this.setMarker(_this)\r\n        },\r\n        // 重新绘制\r\n        reRender() {\r\n            this.map.clearMap()\r\n            this.setMarker(this)\r\n            this.points = []\r\n        },\r\n        // 获取输入提示信息\r\n        autoInput(type) {\r\n            if (type === 'search') {\r\n                this.showList = false\r\n            }\r\n            let _this = this\r\n            if (_this.address) {\r\n                AMap.plugin('AMap.Autocomplete', function () {\r\n                    // 实例化Autocomplete\r\n                    var autoOptions = {\r\n                        // city: _this.cityCode\r\n                    }\r\n                    var autoComplete = new AMap.Autocomplete(autoOptions)\r\n                    autoComplete.search(_this.address, function (status, result) {\r\n                        if (result.tips) {\r\n                            _this.showList = true\r\n                            _this.addressList = result.tips\r\n                        }\r\n                    })\r\n                })\r\n            } else {\r\n                _this.getLocation(_this.map)\r\n            }\r\n        },\r\n        // 设置起点\r\n        setStart(that, lng, lat) {\r\n            let icon = new AMap.Icon({\r\n                size: new AMap.Size(30, 30),    // 图标尺寸\r\n                image: startIcon,  // Icon的图像\r\n                // imageOffset: new AMap.Pixel(0, -60),  // 图像相对展示区域的偏移量，适于雪碧图等\r\n                imageSize: new AMap.Size(30, 30)   // 根据所设置的大小拉伸或压缩图片\r\n            });\r\n            let marker = new AMap.Marker({\r\n                position: new AMap.LngLat(lng, lat),\r\n                icon: icon,\r\n                offset: new AMap.Pixel(-13, -30)\r\n            });\r\n            that.map.add(marker);\r\n        },\r\n        // 选择地址\r\n        chooseAddress(item) {\r\n            let location = {\r\n                lat: item.location.lat,\r\n                lng: item.location.lng\r\n            }\r\n            this.center = location\r\n            this.map.setCenter([item.location.lng, item.location.lat])\r\n            this.setMarker(this)\r\n            this.showList = false\r\n        },\r\n        // 地址关键字搜索\r\n        addressSearch() {\r\n            let _this = this\r\n            axios\r\n                .get('https://restapi.amap.com/v3/assistant/inputtips', {\r\n                    params: {\r\n                        key: '1f3c1c376736a472b55797bf1c03d6f0',\r\n                        keywords: _this.address\r\n                    },\r\n                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                })\r\n                .then(response => {\r\n                })\r\n                .catch(err => {\r\n                })\r\n        },\r\n        // 设置中点图标\r\n        setMarker(that) {\r\n            let icon = new AMap.Icon({\r\n                size: new AMap.Size(30, 30),    // 图标尺寸\r\n                image: markerIcon,  // Icon的图像\r\n                // imageOffset: new AMap.Pixel(0, -60),  // 图像相对展示区域的偏移量，适于雪碧图等\r\n                imageSize: new AMap.Size(30, 30)   // 根据所设置的大小拉伸或压缩图片\r\n            });\r\n            let marker = new AMap.Marker({\r\n                position: new AMap.LngLat(that.center.lng, that.center.lat),\r\n                icon: icon,\r\n                offset: new AMap.Pixel(-13, -30)\r\n            });\r\n            that.map.add(marker);\r\n        },\r\n        // 获取区域详情\r\n        getDetail() {\r\n            this.$post(`/admin/dispatch/get-location`, { id: this.areaId }).then(res => {\r\n                if (res.code === 200) {\r\n                    let points = res.data.point\r\n                    if (points.length > 0) {\r\n                        let pointArr = []\r\n                        let totlaLng = 0\r\n                        let totalLat = 0\r\n                        let center = {}\r\n                        points.map(item => {\r\n                            let obj = {\r\n                                lat: item[1],\r\n                                lng: item[0]\r\n                            }\r\n                            totlaLng += item[0]\r\n                            totalLat += item[1]\r\n                            pointArr.push(obj)\r\n                        })\r\n                        center.lng = (totlaLng / points.length).toFixed(6)\r\n                        center.lat = (totalLat / points.length).toFixed(6)\r\n                        this.center = center\r\n                        this.points = pointArr\r\n                        this.name = res.data.name\r\n                        this.defaultAddress = res.data.addr\r\n                        this.defaultLat = res.data.lat\r\n                        this.defaultLng = res.data.lng\r\n                    }\r\n                    this.MapInit()\r\n                } else {\r\n                    this.$Message.warning(res.error)\r\n                }\r\n            })\r\n            .catch(res => {\r\n                this.$Spin.hide();\r\n                this.$Message.warning(\"服务端异常\")\r\n            })\r\n        },\r\n    },\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/areaSetting/areaDetail/areaDetail.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail_container\"},[_c('div',{attrs:{\"id\":\"map\"}}),_vm._v(\" \"),_c('div',{staticClass:\"map_content\"},[_c('div',{staticClass:\"name_box\"},[_c('Input',{attrs:{\"placeholder\":\"请输入默认上车点\"},model:{value:(_vm.defaultAddress),callback:function ($$v) {_vm.defaultAddress=$$v},expression:\"defaultAddress\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"search_box\"},[_c('Input',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":\"请输入地址\",\"id\":\"tipinput\"},model:{value:(_vm.address),callback:function ($$v) {_vm.address=$$v},expression:\"address\"}}),_vm._v(\" \"),_c('Button',{staticClass:\"search_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.autoInput('search')}}},[_vm._v(\"搜索\")]),_vm._v(\" \"),(_vm.addressList.length > 0 && _vm.showList)?_c('div',{staticClass:\"result_box\"},_vm._l((_vm.addressList),function(item,index){return _c('div',{key:index,staticClass:\"single_result\",on:{\"click\":function($event){return _vm.chooseAddress(item)}}},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"detail\"},[_vm._v(_vm._s(item.address))])])}),0):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"name_box\"},[_c('Input',{attrs:{\"placeholder\":\"请输入区域名称\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"coo_box\"},[(_vm.points.length > 0)?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.reRender}},[_vm._v(\"重新绘制\")]):_vm._e(),_vm._v(\" \"),(_vm.points.length > 1)?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.preStep}},[_vm._v(\"上一步\")]):_vm._e(),_vm._v(\" \"),(_vm.points.length > 0)?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendPosition}},[_vm._v(\"修改区域信息\")]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"location_box\"},[(_vm.points.length > 0)?_c('p',[_vm._v(\"已添加的点\")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.points),function(item,index){return [_c('p',{key:index,staticClass:\"single\"},[_vm._v(_vm._s(item.lng)+\",\"+_vm._s(item.lat))])]})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6cb8c440\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/areaSetting/areaDetail/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6cb8c440\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6cb8c440\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/areaSetting/areaDetail/index.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALKADAAQAAAABAAAALAAAAAD8buejAAAFQUlEQVRYCb1Za2gcVRQ+ZzJpklr7JymYlrb4/GMRhShqElzqA0OypUZDq0URofhLCaJi6Q8DIlYpUmgV/GExSqyYkIY8qJRWQx4qJqLWxw8Fpb41SksfJDW7e/zuTXaZ3Jm7c2ez7cBm7j33O9/5cufc1wxTGS5p37yR5i/cS+JtJJJ1JLRW0zL9TsS/EedOUmXVB9z/4cnlhuNSCaSjeQ3NyuMQ2C5CN7nwMNMX+Af6qYbf4N7xGRcfE5NYsDyaqqZ/M52Uk11CtNokdKkj6Bny+CWq9ffxW6NzLj55TCLBkm68lYTfF5H1eYLl3Jn5Z2LZxkOTn7ryeK5ASTc9RDn+qFxiVVxwbdCc6aYHXXU4CZa25mclJz1CUu1K7IpTnOB+V8Vw8YlNCdnS2E5Z6kO+xmJdAtowIBeqoAd4cLLfhlH2oiKkNbWJOPMJHt2qYiTlakNOnyPxb+OR0W9snNaUkK4uD2Lfu1RilUAdi+cP6dgWxVbB9PnxR0BwvcXvopkxp29SsW0BIlNCnmipop/Ofg/BG2yOF9Oup7srL7+O9x+5YMbxTYOu/3hmOwZZYrEI9C38D+P3wyLvtbjfl/RJqY5iaIBv9yJP4RYtmHkrEqoAiisw8RyG725quGsfd3Xlgnjk4/M8fawTc8CLiaZFpSFCcCgl9NI7k/kH5JcFA9vKEHueKvh2Hhw/YcMou2xpvoGy8nEi3jV+nbl0hwfdTPYOV1It0ONdcWIVTmOA1T4Of7QGaDGhYcGeXG2CbHU8nmkaHDtgaw/ZgdU+oQaLIUJLWLBQvcU9bGY+hIHmnOwaC58wkcUSoSUsmBY33xaOJWZPvl5Sd6kk81k4CAR4owS773G54nyAy62YzCekJSwY2e4WGahMbp0zNg9M4hOhJSxYnQZcL5bNrtACLokP07mC32IhLNiTv0yQtS78sLQ2XWVtNxo0Fj6G2V4V+ttsDAsWnjZBtrqeK5nexFIaWoBMH41RWMcFSfuzh0Pr0issuLJqDNGd8xhCUpRu7pYdLaEBkg+l2xRGYZNcK7xJEx7ZM9LWdAzkd5rgYnW9w2J+imorRvLL6cIJO9uKfcmr4Eu0mcIrgSkenrzFjGnZ/NBB9HEiwVqQSB/PyJy0Nf6qA81k1iMFqsygTnX23onChVNCoarr+3SPRXnE2CCwGhu9a/SvRLGIfZpWr+qOChUpmHt7/1PbwSiHS2Jj3s89RyKn10jBWtTN/sGFV0uXRGIhCHr3F6queKVgMAqRgy6Pka2pG2k+M4XHHJ3reWAZ7+xxmocmhm2U9h6GBw+MfomTxB6bc7ntOAz0FhOr4hUVrAXV1L8Aou/KLc7kQ4xTtNJ/0rSb9VjBegCSvw35fNZ0LlcdeZslz9vOvaN/xnHGClYEC29ieAdELzlgxpE7t7M8x0NjR13wToIVEQ9PDBHzbhfSJBh0Qg9et+519XEWrAgxIPbg8UWuQK4BgziIHaeatTuDtrhyIsGarMF/DKIH4ojj2iF2irzaVoyR2ThssL3oPBwEBsvS0bGCZv8YwP6hJWh3LeMfPoGVNMUjE6dcffK45D0MTz1z1PntCHw8T+R6h89XVLny7lLEqhglCVaOegtZ57fh0Q6qussFsRPk+yk+fDR0knDxV5iSBStnLbqh8n4IeVvVi11YGEaopv4erJ6ni+Hi2krKYZMUucyUbnoZW8pnzDZVZ/YOUM0VnUilbFR7EltZBOcD4sPKTpLcazhfVSobyOfxPa4T0+Hrecxy72UVrMQsfMujp/E9L4eu3cvD458tV2TQ/3+Ak7FIyDXYhQAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/location.png\n// module id = J0sJ\n// module chunks = 4 5","module.exports = \"data:image/png;base64,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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/start.png\n// module id = fAJv\n// module chunks = 4 5"],"sourceRoot":""}