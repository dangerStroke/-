webpackJsonp([29],{GOEB:function(t,e){},N2q7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"changeRule",data:function(){return{columns:[{type:"index",title:"序号",width:80,align:"center"},{title:"改签时间",slot:"time",align:"center"},{title:"操作",slot:"action",width:300}],data:[]}},created:function(){this.$Spin.show(),this.getRules()},methods:{getRules:function(){var t=this;this.$fetch("admin/config/getTicketConfig").then(function(e){if(t.$Spin.hide(),e.data){var n=[{time:e.data.scope_time,timeStr:e.data.scope_time/60/60,type:"normal",inputValue:e.data.scope_time/60/60}];t.data=n}else{var i=[{time:null,type:"edit",editTime:null,inputValue:null}];t.data=i}}).catch(function(e){t.$Spin.hide()})},inputChange:function(t,e,n){e.inputValue=t.currentTarget.value,this.$set(this.data,n,e)},bindEdit:function(t,e,n){"edit"===n?t.type="edit":t.time&&(t.type="normal"),this.$set(this.data,e,t)},submitEdit:function(){var t=this,e=60*Number(this.data[0].inputValue)*60;this.$fetch("admin/config/saveTicket?time="+e).then(function(e){t.$Spin.hide(),200===e.code?(t.$Message.success("配置成功"),t.getRules()):t.$Message.warning(e.error)}).catch(function(e){t.$Spin.hide()})}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"change_box"},[n("Table",{attrs:{border:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"time",fn:function(e){var i=e.row,a=e.index;return[n("div",{staticClass:"input_box"},[n("p",[t._v("发车")]),t._v(" "),"normal"===i.type?n("p",{staticClass:"change_time"},[t._v(t._s(i.timeStr))]):t._e(),t._v(" "),"edit"===i.type?n("Input",{staticStyle:{width:"200px"},attrs:{type:"number",value:i.inputValue,placeholder:"请填写改签时间"},on:{"on-change":function(e){return t.inputChange(e,i,a)}}}):t._e(),t._v(" "),n("p",[t._v("小时之前可以改签")])],1)]}},{key:"action",fn:function(e){var i=e.row,a=e.index;return["normal"===i.type?n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.bindEdit(i,a,"edit")}}},[t._v("修改")]):t._e(),t._v(" "),"edit"===i.type?n("Button",{attrs:{type:"primary"},on:{click:t.submitEdit}},[t._v("保存")]):t._e(),t._v(" "),"edit"===i.type?n("Button",{attrs:{type:"error"},on:{click:function(e){return t.bindEdit(i,a,"cancle")}}},[t._v("取消")]):t._e()]}}])})],1)},staticRenderFns:[]};var c=n("VU/8")(i,a,!1,function(t){n("GOEB")},"data-v-57a34d0d",null);e.default=c.exports}});
//# sourceMappingURL=29.36126f11b1fd3230faf1.js.map