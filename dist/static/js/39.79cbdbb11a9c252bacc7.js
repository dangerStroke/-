webpackJsonp([39],{RZn5:function(t,n){},v6mk:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("+aT9"),o=e.n(a),s=e("mtWM"),i=e.n(s),r={data:function(){return{map:{},points:[],address:"",addressList:[],showList:!1,center:{},cityCode:"",marker:{}}},created:function(){var t=new o.a.Marker({position:new o.a.LngLat(that.center.lng,that.center.lat),icon:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",offset:new o.a.Pixel(-13,-30)});console.log("marker"),console.log(t)},computed:{},mounted:function(){this.MapInit()},watch:{address:function(){this.autoInput("")}},methods:{setMarker:function(t){var n=new o.a.Marker({position:new o.a.LngLat(t.center.lng,t.center.lat),icon:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",offset:new o.a.Pixel(-13,-30)});t.map.add(n)},sendPosition:function(){this.points.length>0?this.$Message.success("发送成功"):this.$Message.warning("请选择地点")},chooseAddress:function(t){var n={lat:t.location.lat,lng:t.location.lng};this.center=n,this.map.setCenter([t.location.lng,t.location.lat]),this.showList=!1},autoInput:function(t){"search"===t&&(this.showList=!1);var n=this;n.address?o.a.plugin("AMap.Autocomplete",function(){new o.a.Autocomplete({}).search(n.address,function(t,e){e.tips&&(n.showList=!0,n.addressList=e.tips)})}):n.getLocation(n.map)},addressSearch:function(){i.a.get("https://restapi.amap.com/v3/assistant/inputtips",{params:{key:"378e9c01b887d13383eba7dc7ef637b8",keywords:this.address},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log("地址搜索")}).catch(function(t){console.log(t)})},MapInit:function(){var t=this,n=new o.a.Map("map",{resizeEnable:!0,zoom:10});t.getLocation(n),n.on("click",function(e){n.clearMap();var a={lat:e.lnglat.lat,lng:e.lnglat.lng};t.points.push(a);var s=[];t.points.map(function(t,n){var e=new o.a.LngLat(t.lng,t.lat);s.push(e)});var i=new o.a.Polygon({path:s,fillOpacity:"0.5",fillColor:"#fff",borderWeight:.2,strokeColor:"red"});n.add(i)}),t.map=n},preStep:function(){if(this.points.length>1){this.map.clearMap(),this.points.pop();var t=[];this.points.map(function(n,e){var a=new o.a.LngLat(n.lng,n.lat);t.push(a)});var n=new o.a.Polygon({path:t,fillColor:"#fff",borderWeight:.2,strokeColor:"red"});this.map.add(n)}},sendLocation:function(){},reRender:function(){this.map.clearMap(),this.points=[]},getLocation:function(t){var n=this;o.a.plugin("AMap.Geolocation",function(){var e=new o.a.Geolocation({enableHighAccuracy:!0,buttonOffset:new o.a.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});e.getCurrentPosition(),o.a.event.addListener(e,"complete",function(e){n.cityCode=e.addressComponent.citycode,n.center={lng:e.position.lng,lat:e.position.lat},t.setCenter([e.position.lng,e.position.lat]);var a=new o.a.Marker({position:new o.a.LngLat(e.position.lng,e.position.lat),icon:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",offset:new o.a.Pixel(-13,-30)});console.log(a),t.add(a)}),o.a.event.addListener(e,"error",function(t){})})}}},c={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[e("div",{attrs:{id:"map"}}),t._v(" "),e("div",{staticClass:"btn_box"},[e("div",{staticClass:"search_box"},[e("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入地址",id:"tipinput"},model:{value:t.address,callback:function(n){t.address=n},expression:"address"}}),t._v(" "),e("Button",{attrs:{type:"primary"},on:{click:function(n){return t.autoInput("search")}}},[t._v("搜索")]),t._v(" "),t.addressList.length>0&&t.showList?e("div",{staticClass:"result_box"},t._l(t.addressList,function(n,a){return e("div",{key:a,staticClass:"single_result",on:{click:function(e){return t.chooseAddress(n)}}},[e("p",{staticClass:"name"},[t._v(t._s(n.name))]),t._v(" "),e("p",{staticClass:"detail"},[t._v(t._s(n.address))])])}),0):t._e()],1),t._v(" "),e("div",{staticClass:"points_box"},[t.points.length>1?e("Button",{attrs:{type:"primary"},on:{click:t.preStep}},[t._v("上一步")]):t._e(),t._v(" "),t.points.length>0?e("Button",{attrs:{type:"primary"},on:{click:t.reRender}},[t._v("重新绘制")]):t._e(),t._v(" "),t.points.length>0?e("Button",{attrs:{type:"primary"},on:{click:t.sendPosition}},[t._v("发送位置信息")]):t._e()],1),t._v(" "),e("div",{staticClass:"location_box"},[t.points.length>0?e("p",[t._v("已添加的点")]):t._e(),t._v(" "),t._l(t.points,function(n,a){return[e("p",{key:a,staticClass:"single"},[t._v(t._s(n.lng)+","+t._s(n.lat))])]})],2)])])},staticRenderFns:[]};var l=e("VU/8")(r,c,!1,function(t){e("RZn5")},"data-v-32a35bb8",null);n.default=l.exports}});
//# sourceMappingURL=39.79cbdbb11a9c252bacc7.js.map