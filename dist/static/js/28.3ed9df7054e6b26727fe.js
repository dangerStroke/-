webpackJsonp([28],{Ph35:function(t,e){},YsmS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{name:"",columns1:[{title:"商家编号",key:"id",align:"center"},{title:"商家名称",key:"name",align:"center"},{title:"地址",key:"address",align:"center"},{title:"负责人",key:"user_name",align:"center"},{title:"联系电话",key:"phone",align:"center"},{title:"商家性质",key:"nature",align:"center"},{title:"每单佣金(元)",key:"commission",align:"center"},{title:"关联二维码",slot:"qr_code",align:"center",width:150},{title:"操作",slot:"action",width:150,align:"center"}],data1:[],page:1,pagesize:10,total:0,newSiteModal:!1,title:"",formItem:{}}},mounted:function(){this.getMerChantList()},methods:{getMerChantList:function(t){var e=this;"page"!==t&&(this.page=1);var a={page:this.page,pagesize:this.pagesize,name:this.name||""};this.$fetch("/admin/business/get",a).then(function(t){if(console.log(t),200==t.code){var a=t.data.data;e.total=t.data.total,a.map(function(t){t.commission=(Number(t.commission)/100).toFixed(2)}),e.data1=a}else e.$Message.warning(t.error)}).catch(function(t){e.$Spin.hide()})},clearSerach:function(){this.name="",this.getMerChantList()},newSite:function(t,e){console.log(e),this.newSiteModal=!0,"edit"==t?(this.title="修改商家",this.formItem=e):(this.title="新建商家",this.formItem={})},infoSure:function(){var t=this;console.log("模态框的确定按钮");var e=this.formItem;console.log(e),e.commission=100*e.commission,e.name?this.$post("/admin/business/add-edit",e).then(function(e){200==e.code?(t.$Message.info("操作成功"),t.getMerChantList(),t.newSiteModal=!1):t.$Message.warning(e.error)}).catch(function(e){t.$Spin.hide()}):(this.$Message.error("请填写商家名称"),this.newSiteModal=!0)},cancel:function(){this.formItem={},this.newSiteModal=!1},remove:function(t,e){var a=this;this.$Modal.confirm({title:"你确定要删除该商家吗？",okText:"确定",cancelText:"取消",onOk:function(){var n=this;this.$post("/admin/business/del",{id:t}).then(function(t){console.log(t),200==t.code?(n.$Message.info("删除商家成功"),a.data1.splice(e,1)):n.$Message.warning(t.error)}).catch(function(t){n.$Spin.hide()})},onCancel:function(){console.log("点击了取消删除")}})},changePage:function(t){this.page=t,this.getMerChantList("page")}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merChant"},[a("div",{staticClass:"new_site"},[a("div",{staticClass:"inputMsg"},[a("Input",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{type:"text",placeholder:"商家名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("div",{staticClass:"btns"},[a("Button",{attrs:{type:"primary"},on:{click:t.getMerChantList}},[t._v("搜索")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:t.clearSerach}},[t._v("清空")]),t._v(" "),a("Button",{staticClass:"newBtn",attrs:{type:"primary"},on:{click:function(e){return t.newSite("new")}}},[a("Icon",{attrs:{type:"md-add"}}),t._v("新建\n      ")],1)],1)]),t._v(" "),a("Table",{attrs:{columns:t.columns1,data:t.data1,border:""},scopedSlots:t._u([{key:"qr_code",fn:function(t){var e=t.row;return t.index,[a("div",{staticStyle:{padding:"10px 0"}},[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.qr_code,alt:""}})])]}},{key:"action",fn:function(e){var n=e.row,i=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.newSite("edit",n)}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(n.id,i)}}},[t._v("删除")])]}}])}),t._v(" "),a("Modal",{attrs:{title:t.title},model:{value:t.newSiteModal,callback:function(e){t.newSiteModal=e},expression:"newSiteModal"}},[a("Form",{attrs:{model:t.formItem,"label-width":80}},[a("FormItem",{attrs:{label:"商家名称",required:""}},[a("Input",{attrs:{placeholder:"输入商家名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"地址"}},[a("Input",{attrs:{placeholder:"输入商家地址"},model:{value:t.formItem.address,callback:function(e){t.$set(t.formItem,"address",e)},expression:"formItem.address"}})],1),t._v(" "),a("FormItem",{attrs:{label:"负责人"}},[a("Input",{attrs:{placeholder:"输入负责人"},model:{value:t.formItem.user_name,callback:function(e){t.$set(t.formItem,"user_name",e)},expression:"formItem.user_name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"联系电话"}},[a("Input",{attrs:{placeholder:"输入联系电话"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone",e)},expression:"formItem.phone"}})],1),t._v(" "),a("FormItem",{attrs:{label:"商家性质"}},[a("Input",{attrs:{placeholder:"输入商家性质"},model:{value:t.formItem.nature,callback:function(e){t.$set(t.formItem,"nature",e)},expression:"formItem.nature"}})],1),t._v(" "),a("FormItem",{attrs:{label:"每单佣金(元)"}},[a("Input",{attrs:{placeholder:"输入每单佣金"},model:{value:t.formItem.commission,callback:function(e){t.$set(t.formItem,"commission",e)},expression:"formItem.commission"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.infoSure}},[t._v("确定")])],1)],1),t._v(" "),a("div",{staticClass:"page_box"},[a("div",{staticClass:"page_left"},[t._v("\n      共"+t._s(t.total)+"条记录 第"+t._s(t.page)+"/"+t._s(Math.ceil(t.total/t.pagesize))+"页\n    ")]),t._v(" "),a("div",{staticClass:"page_right"},[a("Page",{attrs:{total:t.total,"page-size":t.pagesize,current:t.page},on:{"on-change":t.changePage}})],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(n,i,!1,function(t){a("Ph35")},"data-v-726f8282",null);e.default=o.exports}});
//# sourceMappingURL=28.3ed9df7054e6b26727fe.js.map