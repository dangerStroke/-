webpackJsonp([42],{"3rkR":function(t,e){},gOhC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{columns12:[{type:"index",title:"序号",key:"id",align:"center"},{title:"姓名",key:"name",align:"center"},{title:"职业",key:"job",align:"center"},{title:"工作单位全称",key:"work_unit",align:"center"},{title:"工作证照片",slot:"auth_img",align:"center"},{title:"状态",slot:"status",align:"center"},{title:"操作",slot:"action",align:"center",minWidth:100}],data:[],page:1,page_size:10,total:0,modal1:!1,formLeft:{},visible1:!1,bigImgUrl:"",deg:0}},created:function(){this.$Spin.show(),this.getDataList()},methods:{getDataList:function(t){var e=this;"page"!==t&&(this.page=1);var a={page:this.page,page_size:this.page_size};this.$fetch("admin/hero/gets",a).then(function(t){if(e.$Spin.hide(),console.log(t.data),200===t.code){var a=t.data.ret;e.data=a,e.total=t.data.total}else e.$Message.warning(t.error)}).catch(function(t){e.$Spin.hide()})},detail:function(t){this.modal1=!0,console.log(t),this.formLeft=t},changeStatus:function(t,e){var a=this,i=this;console.log(t.id,e);var s="";s=1===e?"<div>您确定要拒绝<strong>"+t.name+"</strong>的防疫认证吗？</div>":"<div>您确定要审核通过，通过后<strong>"+t.name+"</strong>将享受城际全年免单</div>",this.$Modal.confirm({title:s,onOk:function(){a.$post("admin/hero/change-status",{id:t.id,status:e}).then(function(t){console.log(t),200==t.code?i.getDataList():a.$Message.warning(t.error)}).catch(function(t){a.$Spin.hide()})}})},pass:function(t){this.changeStatus(t,2)},refuse:function(t){this.changeStatus(t,1)},handleView:function(t){console.log(t),this.visible1=!0,this.bigImgUrl=t},rotate:function(){this.deg+=90,this.deg>=360&&(this.deg=0),this.$refs.rotate.style.transform="rotate("+this.deg+"deg)"},changePage:function(t){this.page=t,this.getDataList("page")}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("Table",{attrs:{border:"",columns:t.columns12,data:t.data},scopedSlots:t._u([{key:"auth_img",fn:function(e){var i=e.row;return[a("img",{staticStyle:{"margin-top":"4px",cursor:"pointer",width:"120px",height:"100px"},attrs:{src:i.auth_img,alt:""}}),t._v(" "),a("p",{staticStyle:{"font-size":"12px",color:"#18AFFF",cursor:"pointer"},on:{click:function(e){return t.handleView(i.auth_img)}}},[t._v("查看大图")])]}},{key:"status",fn:function(e){var i=e.row;return[0==i.status?a("strong",[t._v("待认证")]):1==i.status?a("strong",[t._v("认证失败")]):2==i.status?a("strong",[t._v("认证成功")]):t._e()]}},{key:"action",fn:function(e){var i=e.row;return e.index,[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.detail(i)}}},[t._v("详情")]),t._v(" "),0==i.status||1==i.status?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.pass(i)}}},[t._v("通过")]):t._e(),t._v(" "),0==i.status||1==i.status?a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.refuse(i)}}},[t._v("拒绝")]):t._e()]}}])}),t._v(" "),a("Modal",{attrs:{title:"工作证照片",width:"700px"},model:{value:t.visible1,callback:function(e){t.visible1=e},expression:"visible1"}},[t.visible1?a("img",{ref:"rotate",staticStyle:{width:"600px",height:"600px"},attrs:{src:t.bigImgUrl}}):t._e(),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.rotate}},[t._v("旋转")]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),a("div",[a("Modal",{attrs:{title:"医护人员详情"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{attrs:{model:t.formLeft,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"姓名"}},[a("Input",{attrs:{disabled:""},model:{value:t.formLeft.name,callback:function(e){t.$set(t.formLeft,"name",e)},expression:"formLeft.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"职业"}},[a("Input",{attrs:{disabled:""},model:{value:t.formLeft.job,callback:function(e){t.$set(t.formLeft,"job",e)},expression:"formLeft.job"}})],1),t._v(" "),a("FormItem",{attrs:{label:"工作单位全称"}},[a("Input",{attrs:{disabled:""},model:{value:t.formLeft.work_unit,callback:function(e){t.$set(t.formLeft,"work_unit",e)},expression:"formLeft.work_unit"}})],1),t._v(" "),a("FormItem",{attrs:{label:"工作证照片"}},[a("img",{staticClass:"detailImg",staticStyle:{width:"150px",height:"120px"},attrs:{src:t.formLeft.auth_img,alt:""}})]),t._v(" "),a("FormItem",{attrs:{label:"状态"}},[0==t.formLeft.status?a("strong",[t._v("待认证")]):1==t.formLeft.status?a("strong",[t._v("认证失败")]):2==t.formLeft.status?a("strong",[t._v("认证成功")]):t._e()])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1),t._v(" "),a("div",{staticClass:"page_box"},[a("div",{staticClass:"page_left"},[t._v("\n      共"+t._s(t.total)+"条记录 第"+t._s(t.page)+"/"+t._s(Math.ceil(t.total/t.page_size))+"页\n    ")]),t._v(" "),a("div",{staticClass:"page_right"},[a("Page",{attrs:{total:t.total,"page-size":t.page_size,current:t.page},on:{"on-change":t.changePage}})],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(t){a("3rkR")},"data-v-262be410",null);e.default=o.exports}});
//# sourceMappingURL=42.dc2b40d5d8ba3bd23f2a.js.map